name: Sync with Upstream

on:
  workflow_dispatch:
  schedule:
    - cron: '0 */1 * * *'  # Run every 1 hour

jobs:
  sync:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ./  # Set the working directory to the root of the repository

    steps:
      - name: Use Node.js 16.x
        uses: actions/setup-node@v4
        with:
          node-version: '16'

      - name: Checkout Code
        uses: actions/checkout@v2

      - name: Set Upstream Remote
        run: git remote add upstream https://github.com/Donkie/Spoolman

      - name: Fetch Upstream Changes
        run: git fetch upstream

      - name: Merge Upstream Changes
        run: git merge upstream/main  # Adjust the branch as needed

      - name: Push Changes to Fork
        run: git push origin main  # Adjust the branch as needed
